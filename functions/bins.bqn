# Search: two-argument âˆŠâŠâŠ’

scales â† â€¢Import "../measure/scale.bqn"
ns     â† â€¢Import "../params/ns_v.bqn"
types  â† â€¢Import "../params/cputype.bqn"

# Inputs
Length â† {
  name â‡ âˆ¾"Searched-"â€¿ğ•¨â€¿" length"
  range â‡ scales.E13 max â‡ ğ•©
}

sizes â† {
  name â‡ "Size"
  range â‡ 10â€¿25â€¿100â€¿1e6
  labels â‡ ("in "âˆ¾â€¢Repr)Â¨ range
  Order â‡ âŒ½
}

Bench â† {
  paramsâ€¿inputâ€¿Measure â‡ extâ€¿desc â† ğ•©
  name     â‡ "bins-"âˆ¾ext
  plotname â‡ desc
  result â‡ ns
  plotOpts â‡ {
    title â‡ plotname
    x â‡ input
    y â‡ result
    key â‡ âŠ‘params
  }
}

summary â† {
  ext â‡ "rand-up"
  desc â‡ "Bins Up for 1e6 random numbers"
  params â‡ âŸ¨typesâŸ©
  input â‡ "in" Length 1e7
  Measure â‡ { ğ•Š âŸ¨typeâŸ©:
    âŸ¨GetGen,GetGenSortedâŸ© â† type
    len â‡ 1e6
    TimeParams â‡ { âŸ¨â‹, GetGenSorted ğ•©, (ğ•©+1) GetGen lenâŸ© }
  }
}

BenchType â† {
  ext â‡ ğ•©.dispâˆ¾"-up"
  desc â‡ âˆ¾"Bins Up on random "â€¿ğ•©.labelâ€¿"s"
  params â‡ âŸ¨sizesâŸ©
  input â‡ "for" Length 1e5
  âŸ¨GetGen,GetGenSortedâŸ© â† ğ•©
  Measure â‡ { ğ•Š âŸ¨lenâŸ©:
    TimeParams â‡ { âŸ¨â‹, GetGenSorted len, (ğ•©+1) GetGen ğ•©âŸ© }
  }
}

BenchÂ¨ âŸ¨summaryâŸ©âˆ¾BenchTypeÂ¨ types.range
