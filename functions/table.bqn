# Table modifier

name â‡ "table"

arith â† âŠâŸ¨âŒˆâŸ©

xmax â† 1e5
measure â‡ (â†•4) { typeğ•Šfn:
  float â† 64 = size â‡ 2â‹†3+type
  max â† (Â¬float) Ã— 1-Ëœ2â‹†size-1
  Flip â† xmaxâŒˆâˆ˜Ã·âŠ¢  # Length of other dimension
  scale â‡ {(âŠ¢âˆ¾Flipâˆ˜âŒ½) â· âŒˆ ğ•© â‹† (2âŠ¸Ã—Ã·Ëœ0âˆ¾0.5+â†•) âŒˆ2Ã·Ëœ âŒˆ1.3â‹†â¼ğ•©} xmax
  Result â‡ {xğ•Šy: xâ‹ˆ1e9Ã—yÃ·FlipâŠ¸Ã—x}
  GetGen â† {
    âŸ¨RandâŸ© â† âŸ¨ğ•©âŸ© â€¢Import "../measure/gen.bqn"
    (âŒˆ(1âŒˆmax)Ã·2) -Ëœ ğ•© Rand maxË™
  }
  TimeParams â‡ { âŸ¨fnâŒœâŸ© âˆ¾ â‹ˆâ—‹GetGenâŸœFlip ğ•© }
  timeInit â‡ 1e4â€¿1â€¿1e3
  xmax â‡ xmax
}âŒœ arith

PlotPre â‡ âŒ½
plotOpts â‡ {
  title â‡ "Arithmetic âŒˆâŒœ with 1e5-element result"
  xcapt â‡ "Left argument length"
  ycapt â‡ "Time (ns / value)"
  labels â‡ âŒ½(âˆ¾âŸœ"-byte int"Â¨"124")âˆ¾<"8-byte float"
}
