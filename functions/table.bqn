# Table modifier

basename â† "table"

ns     â† {denomâ‡"output"} â€¢Import "../params/ns_v.bqn"
types  â† â€¢Import "../params/numtype.bqn"
ctypes â† â€¢Import "../params/cputype.bqn"
scales â† â€¢Import "../measure/scale.bqn"

FullName â† "min"â€¿"less"â€¿"plus" âŠ‘Ëœ "âŒŠ<+"âŠ¸âŠâŒ¾<
Bench â† { over ğ•Š fname:
  total â† â€¢ParseFloat tnameâ†"1e4"
  Flip â† totalâŒˆâˆ˜Ã·âŠ¢  # Length of other dimension
  fn â† â€¢BQN â¥Šfname
  name â‡ âˆ¾âŸ¨basename,"-", FullName fname, over/"-over"âŸ©
  plotname â† âˆ¾âŸ¨"Arithmetic ",fname,"âŒœ ",over/"(overflow) "
               "with ",tname,"-element result"âŸ©

  params â‡ âŸ¨(over<fname='+')âŠ‘typesâ€¿ctypesâŸ©
  input â‡ {
    name â‡ "Right argument length"
    range â‡ 1.2 scales._exp2d total
  }
  result â‡ ns
  Measure â‡ { ğ•Š âŸ¨typeâŸ©:
    getGen â† {âŸ¨Gâ‡GetGenSmallâŸ©: over? G ; ğ•©.GetGen} type
    Len â‡ FlipâŠ¸Ã—
    TimeParams â‡ { âŸ¨FnâŒœâŸ© âˆ¾ GetGenÂ¨ FlipâŠ¸â‹ˆ ğ•© }
  }
  plotOpts â‡ {
    title â‡ plotname
    x â‡ input
    y â‡ result
    key â‡ âŠ‘params
  }
}

(0 BenchÂ¨ "âŒŠ<+") âˆ¾ 1 Bench '+'
