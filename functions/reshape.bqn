# Reshape â¥Š

scale â† â€¢Import "../measure/scale.bqn"
types â† â€¢Import "../params/numtype.bqn"

Bench â† {
  inputâ€¿measure â‡ extâ€¿plotname â† ğ•©
  name â‡ "reshape-"âˆ¾ext

  params â‡ âŸ¨typesâŸ©
  result â‡ ({âŸ¨râ‡denomâŸ©:âŸ¨{denomâ‡r}âŸ©;âŸ¨âŸ©}ğ•©) â€¢Import "../params/ns_v.bqn"

  plotOpts â‡ {
    title â‡ plotname
    x â‡ input
    y â‡ result
    labels â‡ (âŠ‘params).labels
    Order â‡ âŒ½
    ChangeBounds â‡ x.maxâŠ¸âŒŠâŒ¾âŠ‘
  }
}

BenchÂ¨ âŸ¨
  {
    ext â‡ "double"
    plotname â‡ "Reshaping list to double length"

    input â‡ {
      name â‡ "Input length"
      max â‡ 1e5
      range â‡ scale.E23 max
    }

    denom â‡ "input"
    Measure â‡ { ğ•Š âŸ¨typeâŸ©:
      TimeParams â‡ { âŸ¨â¥Š, 2Ã—ğ•©, type.GetGenğ•©âŸ© }
      timeInit â‡ 3â€¿1e3â€¿1â€¿1e2
    }
  }
  {
    ext â‡ "large"
    plotname â‡ "Reshaping to 32KB"

    input â‡ {
      name â‡ "Input length"
      max â‡ 1e3
      range â‡ scale.E13 max
    }

    denom â‡ "byte out"
    Measure â‡ { ğ•Š âŸ¨typeâŸ©:
      len â‡ 2â‹†15
      l â† (lenÃ—8) Ã· type.size
      TimeParams â‡ { âŸ¨â¥Š, l, type.GetGen ğ•©âŸ© }
      timeInit â‡ 2â€¿180â€¿1â€¿55
    }
  }
âŸ©
