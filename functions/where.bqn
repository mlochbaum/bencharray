# / with boolean argument

âŸ¨RandBoolâŸ© â† â€¢Import "../measure/gen.bqn"

Bench â† {
  nameâ€¿paramsâ€¿inputâ€¿measure â‡ ğ•©
  âŸ¨plotnameâŸ© â† ğ•©

  result â‡ âŸ¨10âŸ© â€¢Import "../params/ns_v.bqn"

  plotOpts â‡ {
    title â‡ plotname
    x â‡ input
    y â‡ result
    labels â‡ ({labelâ‡â‹ˆ"/"} âŠ£Â´ params).label
    ChangeBounds â‡ x.maxâ€¿y.maxâŠ¸âŒŠ
  }
}

BenchÂ¨ âŸ¨
  {
    name â‡ "where-length"
    plotname â‡ "Indices from uniform boolean list"
    params â‡ âŸ¨âŸ©

    input â‡ {
      name â‡ "Size"
      max â‡ 1e7
      range â‡ 1 â†“ (â€¢Import"../measure/scale.bqn").E13 max
    }

    measure â‡ {
      TimeParams â‡ { âŸ¨/, RandBoolâˆ˜ğ•©âŸ© }
      timeInit â‡ 1e5â€¿1â€¿1e3
    }
  }
  {
    name â‡ "where-density"
    plotname â‡ "Indices from 1e6 booleans"

    params â‡ âŸ¨{
      name â‡ "Size"
      range â‡ 10â‹†expâ†2â€¿4â€¿6
      label â‡ ("length 1e"âˆ¾â€¢Repr)Â¨ exp
    }âŸ©

    len â† 1e6
    input â‡ {
      name â‡ "Density (+Â´Ã·â‰ )"
      max â‡ 1
      log â‡ 0
      range â‡ â†•âŠ¸âˆ¾âŠ¸Ã· 20
    }

    Measure â‡ { ğ•ŠâŸ¨lenâŸ©: lenâ‡
      TimeParams â‡ { âŸ¨/, lenâ†‘Â·/â¼(âŒŠ0.5+ğ•©Ã—len) â€¢rand.Subset lenË™âŸ© }
      timeInit â‡ 1â€¿0â€¿0.5
    }
  }
âŸ©
