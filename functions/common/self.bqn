# Self-searching and sorting/grading

âŸ¨basenameâ‡name, title, fnsâŸ© â† âŠ‘â€¢args

scales â† â€¢Import "../../measure/scale.bqn"
ns     â† â€¢Import "../../params/ns_v.bqn"
types  â‡ â€¢Import "../../params/cputype.bqn"
fnobjs â† âŸ¨fnsâŸ© â€¢Import "../../params/arith.bqn"

Scale â† {
  name â‡ "Length"
  range â‡ scales.E13 max â‡ ğ•©
}

Bench â‡ {
  inputâ€¿Measure â‡ extâ€¿desc â† ğ•©
  plotname â‡ âˆ¾titleâ€¿" "â€¿desc
  name â‡ basenameâˆ¾"-"âˆ¾ext
  params â‡ âŸ¨fnobjsâŸ©
  result â‡ ns
  plotOpts â‡ {
    title â‡ plotname
    x â‡ input
    y â‡ result
    âŸ¨labelsâŸ© â‡ âŠ‘params
  }
}
BenchLenAll â‡ { peâ€¿pd ğ•Š maxlenâ€¿typeToGen:
  Benchâˆ˜{
    ext  â‡ âˆ¾peâ€¿"-"â€¿ğ•©.disp
    desc â‡ âˆ¾pdâ€¿" "â€¿ğ•©.label
    getGen â† TypeToGen ğ•©
    input â‡ Scale maxlen
    Measure â‡ { ğ•Š âŸ¨fnâŸ©:
      TimeParams â‡ { âŸ¨Fn, GetGenğ•©âŸ© }
      timeInit â‡ 1e5â€¿1â€¿1e3
    }
  }Â¨ types.range
}
BenchFixLen â‡ { peâ€¿pd ğ•Š âŸ¨len,typeToGen,input,timeInitâŸ©:
  Benchâˆ˜{
    ext  â‡ âˆ¾peâ€¿"-"â€¿ğ•©.disp
    desc â‡ âˆ¾pdâ€¿" "â€¿ğ•©.label
    getGen â† TypeToGen ğ•©
    input â‡ input
    Measure â‡ { ğ•Š âŸ¨fnâŸ©:
      len â‡ len
      TimeParams â‡ { âŸ¨Fn, GetGenğ•©âŸ© }
    }
  }Â¨ types.range
}
