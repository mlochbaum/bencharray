# Monadic arithmetic functions

basename â† "arithm"

ns_v   â† â€¢Import "../params/ns_v.bqn"
types  â† â€¢Import "../params/numtype.bqn"
GetFns â† â‹ˆ â€¢Import "../params/arith.bqn"Ë™
GetInp â† {nameâ‡"Length" â‹„ rangeâ‡ğ•©}

Bench â† {
  extâ€¿fnsâ€¿rangeâ€¿plotpreâ€¿plotname â† ğ•©
  name â‡ basenameâˆ¾ext
  params â‡ types â‹ˆ fnobjs â† GetFns fns
  input â‡ GetInp range
  result â‡ ns_v
  Measure â‡ { ğ•Š typeâ€¿fn:
    âŸ¨size,GetGenâŸ© â† type â‹„ sizeâ‡
    TimeParams â‡ { âŸ¨fn, GetGenğ•©âŸ© }
  }
  PlotPreâ‡
  plotOpts â‡ {
    title â‡ plotname
    x â‡ types
    y â‡ result
    labels â‡ {ğ•©.DispÂ¨ ğ•©.num} fnobjs
  }
}
Summary â† Benchâˆ˜{
  extâ‡ğ•¨ â‹„ fnsâ€¿plotname â‡ ğ•©
  Range â‡ {<(2â‹†3+15)Ã·ğ•©.size}
  PlotPre â‡ {> types.numâŠ¸â‹ˆÂ¨ <Ë˜â‰1âŠ‘â‰1ğ•©}
}

âŸ¨
  "-simple"  Summary âŸ¨-â€¿Â¬â€¿Ã—â€¿|â€¿âŒŠâ€¿âŒˆ,  "Monadic arithmetic, 32KB"âŸ©
  "-slow"    Summary âŸ¨(â‹†â¼)â€¿â‹†â€¿âˆšâ€¿Ã·,   "Slow monadic arithmetic, 32KB"âŸ©
âŸ©
